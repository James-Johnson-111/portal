{"version":3,"sources":["Components/EmployeeProtal/Dashboard/Components/Notifications/Notifications.jsx","Components/EmployeeProtal/Dashboard/Components/TopBar/TopBar.jsx"],"names":["Notifications","props","history","useHistory","useState","Notificationss","setNotificationss","useEffect","Notification","permission","requestPermission","then","GetNotify","socket","on","notify_to","Data","emp_id","parseInt","getOS","userAgent","window","navigator","platform","os","indexOf","test","FormData","append","sessionStorage","getItem","axios","post","res","data","reverse","notify","sender","txt","x","length","notified","notification_title","notification_body","Note","catch","err","console","log","document","title","name","body","icon","onclick","open","GotoLink","eventID","replace","className","onMouseLeave","map","val","index","to","link","onClick","event_id","notification_date","toString","substring","notification_time","id","RemoveNotification","notification_id","TopBar","ShowSBar","setShowSBar","useSelector","state","EmpAuth","EmployeeData","dispatch","useDispatch","encryptor","require","$","slideUp","toggle","style","direction","emp_image","decrypt","login_id","ShowSideBar"],"mappings":"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","file":"static/js/17.b0470760.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport './Notifications.css';\r\nimport axios from '../../../../../axios';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport socket from '../../../../../io';\r\n// import { getStore, newStore, deleteStore } from '../../../../../storage';\r\n\r\nfunction Notifications( props ) {\r\n\r\n    const history = useHistory();\r\n    const [ Notificationss, setNotificationss ] = useState([]);\r\n\r\n    useEffect(\r\n        () => {\r\n\r\n            if (Notification.permission !== 'granted') {\r\n                Notification.requestPermission().then(permission => {\r\n\r\n                    if (permission === 'granted') {\r\n                        GetNotify();\r\n                    }\r\n\r\n                })\r\n\r\n            } else {\r\n                GetNotify();\r\n            }\r\n\r\n            socket.on(\r\n                'NotifyTheUser', ( notify_to ) => {\r\n    \r\n                    if ( props.Data.emp_id === parseInt( notify_to ) )\r\n                    {\r\n                        // deleteStore('notifications');\r\n                        GetNotify();\r\n                    }\r\n    \r\n                }\r\n            )\r\n\r\n        }, []\r\n    )\r\n\r\n    const getOS = () => {\r\n        var userAgent = window.navigator.userAgent,\r\n            platform = window.navigator.platform,\r\n            macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\r\n            windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\r\n            iosPlatforms = ['iPhone', 'iPad', 'iPod'],\r\n            os = null;\r\n\r\n        if (macosPlatforms.indexOf(platform) !== -1) {\r\n            os = 'Mac OS';\r\n        } else if (iosPlatforms.indexOf(platform) !== -1) {\r\n            os = 'iOS';\r\n        } else if (windowsPlatforms.indexOf(platform) !== -1) {\r\n            os = 'Windows';\r\n        } else if (/Android/.test(userAgent)) {\r\n            os = 'Android';\r\n        } else if (!os && /Linux/.test(platform)) {\r\n            os = 'Linux';\r\n        }\r\n\r\n        return os;\r\n    }\r\n\r\n    const GetNotify = () => {\r\n\r\n        const Data = new FormData();\r\n        Data.append('EmpID', sessionStorage.getItem('EmpID'));\r\n        // if ( getStore('notifications') === undefined || getStore('notifications') === null )\r\n        // {\r\n    \r\n            axios.post('/getnotifications', Data).then(res => {\r\n    \r\n                setNotificationss( res.data.reverse() );\r\n                // newStore( 'notifications', JSON.stringify( res.data.reverse() ) );\r\n                \r\n                let notify = false;\r\n                let sender = null;\r\n                let txt = null;\r\n                for ( let x = 0; x < res.data.length; x++ )\r\n                {\r\n                    if ( res.data[x].notified === null )\r\n                    {\r\n                        notify = true;\r\n                        sender = res.data[x].notification_title;\r\n                        txt = res.data[x].notification_body;\r\n                    }\r\n                }\r\n    \r\n                if ( notify )\r\n                {\r\n                    axios.post('/notified', Data).then(res => {\r\n    \r\n                        if (getOS() !== 'iOS' && getOS() !== 'Android') {\r\n                            Note(res.data.length, sender, txt);\r\n                        }\r\n                    \r\n            \r\n                    }).catch(err => {\r\n            \r\n                        console.log(err);\r\n            \r\n                    });\r\n                }else\r\n                {\r\n                    document.title = 'Employee Portal';\r\n                }\r\n    \r\n            }).catch(err => {\r\n    \r\n                console.log(err);\r\n    \r\n            });\r\n        // }else\r\n        // {\r\n\r\n            // setNotificationss( getStore('notifications') );\r\n                \r\n            //     let notify = false;\r\n            //     let sender = null;\r\n            //     let txt = null;\r\n            //     for ( let x = 0; x < getStore('notifications').length; x++ )\r\n            //     {\r\n            //         if ( getStore('notifications')[x].notified === null )\r\n            //         {\r\n            //             notify = true;\r\n            //             sender = getStore('notifications')[x].notification_title;\r\n            //             txt = getStore('notifications')[x].notification_body;\r\n            //         }\r\n            //     }\r\n    \r\n            //     if ( notify )\r\n            //     {\r\n            //         axios.post('/notified', Data).then(res => {\r\n    \r\n            //             if (getOS() !== 'iOS' && getOS() !== 'Android') {\r\n            //                 Note(getStore('notifications').length, sender, txt);\r\n            //             }\r\n                    \r\n            \r\n            //         }).catch(err => {\r\n            \r\n            //             console.log(err);\r\n            \r\n            //         });\r\n            //     }else\r\n            //     {\r\n            //         document.title = 'Employee Portal';\r\n            //     }\r\n\r\n        // }\r\n\r\n    }\r\n\r\n\r\n    const Note = ( length, name, body ) => {\r\n\r\n        document.title = 'Employee Portal Has (' + length + ') Notifications';\r\n        let notification = new Notification('Employee Portal', {\r\n            icon: 'https://images-na.ssl-images-amazon.com/images/I/31Ytep50ATL.jpg',\r\n            body: body,\r\n        });\r\n        notification.onclick = function () {\r\n            window.open('https://192.168.10.14/');\r\n        };\r\n\r\n    }\r\n    const OnSeenNotifications = () => {\r\n\r\n        const Data = new FormData();\r\n        Data.append('EmpID', sessionStorage.getItem('EmpID'));\r\n        axios.post('/seennotifications', Data).then(() => {\r\n\r\n            // deleteStore('notifications');\r\n            GetNotify();\r\n\r\n        }).catch(err => {\r\n\r\n            console.log(err);\r\n\r\n        });\r\n\r\n    }\r\n    \r\n    const RemoveNotification = (id) => {\r\n\r\n        const Data = new FormData();\r\n        Data.append('EmpID', sessionStorage.getItem('EmpID'));\r\n        Data.append('NotificationID', id);\r\n        axios.post('/removenotifications', Data).then(res => {\r\n\r\n            // deleteStore('notifications');\r\n            GetNotify();\r\n\r\n        }).catch(err => {\r\n\r\n            console.log(err);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    const RemoveAllNotifications = () => {\r\n\r\n        const Data = new FormData();\r\n        Data.append('EmpID', sessionStorage.getItem('EmpID'));\r\n        axios.post('/removeallnotifications', Data).then(res => {\r\n\r\n            // deleteStore('notifications');\r\n            GetNotify();\r\n\r\n        }).catch(err => {\r\n\r\n            console.log(err);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    const GotoLink = ( eventID ) => {\r\n        \r\n        if ( eventID === 1 )\r\n        {\r\n            history.replace('/chat');\r\n        }\r\n\r\n    }\r\n\r\n    return ( \r\n        \r\n        <>\r\n            <div className=\"px-3 notification\" onMouseLeave={OnSeenNotifications}>\r\n                {\r\n                    Notificationss.length > 0\r\n                        ?\r\n                        <div className=\"notification_number\"></div>\r\n                        :\r\n                        null\r\n                }\r\n                <i className=\"las la-bell\"></i>\r\n                <div className=\"Notifications_Box\">\r\n                    <div className=\"Notifications_list\">\r\n                        {\r\n                            Notificationss.map(\r\n                                (val, index) => {\r\n\r\n                                    return (\r\n                                        <Link to={ val.link } className=\"list\" key={index}>\r\n                                            <p className=\"font-weight-bold mb-0\" onClick={() => GotoLink(val.event_id)}> {val.notification_title} </p>\r\n                                            <p className=\"mb-0 text-secondary\" onClick={() => GotoLink(val.event_id)}>\r\n                                                {val.notification_body}\r\n                                            </p>\r\n                                            <div className=\"d-flex justify-content-between font-weight-bold\">\r\n                                                <p className=\"mb-0\" onClick={() => GotoLink(val.event_id)}>\r\n                                                    {val.notification_date.toString().substring(0, 10)}\r\n                                                </p>\r\n                                                <p className=\"mb-0\" onClick={() => GotoLink(val.event_id)}>\r\n                                                    {val.notification_time}\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"cross\" onClick={() => RemoveNotification(val.notification_id)}><i className=\"las la-times\"></i></div>\r\n                                        </Link>\r\n                                    )\r\n                                }\r\n                            )\r\n                        }\r\n                    </div>\r\n                    <div className=\"Notifications_Clear\">\r\n                        <button className=\"btn\" onClick={RemoveAllNotifications} >Clear All</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Notifications;","import React, { useEffect, useState } from 'react';\n\nimport './TopBar.css';\n\nimport $ from 'jquery';\nimport { NavLink } from 'react-router-dom';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ShowSideBar } from '../../../../../Redux/Actions/Action';\nimport Notifications from '../Notifications/Notifications';\n\nconst TopBar = () => {\n\n    const [ ShowSBar, setShowSBar ] = useState( false );\n\n    const Data = useSelector( ( state ) => state.EmpAuth.EmployeeData );\n    const dispatch = useDispatch();\n\n    let key = 'real secret keys should be long and random';\n    const encryptor = require('simple-encryptor')(key);\n\n    useEffect(\n        () => {\n\n            $('.search_dropdown').slideUp(0);\n            $('.emp_dropdown').slideUp(0);\n\n            $('.search i').on('click', () => {\n                $('.search_dropdown').toggle(300);\n            });\n\n            $('.emp_img').on('click', () => {\n                $('.emp_dropdown').toggle(300);\n            });\n\n            $('.emp_dropdown').on('click', () => {\n                $('.emp_dropdown').toggle(300);\n            });\n\n        }, []\n    );\n\n    const TrueOrFalse = () => {\n\n        if ( ShowSBar )\n        {\n            setShowSBar( false );\n            dispatch( ShowSideBar( false ) );\n        }else\n        {\n            setShowSBar( true );\n            dispatch( ShowSideBar( true ) );\n        }\n\n    }\n\n    return (\n        <>\n            <div className=\"Dashboard_topbar d-center\">\n                <div className=\"topbar_news d-450-none\">\n                    <p className=\"mb-0\" style={{ \"whiteSpace\": 'nowrap' }}>\n                        <marquee direction=\"left\">\n                            Tesla is quickly responding to the NHTSA's investigation of in-dash gaming while cars are moving. The Guardian has learned Tesla will deliver an update disabling on-the-move Passenger Play. A spokeswoman for the regulator said Tesla promised the change after\n                        </marquee>\n                    </p>\n                </div>\n                <div className=\" d-450-block\"></div>\n                <div className=\"icons d-center\">\n                    <Notifications Data={ Data } />\n                    <div className=\"px-3 emp_img_container\">\n                        <div className=\"emp_img\" style={ { \"backgroundImage\" : \"url('images/employees/\" + Data.emp_image + \"')\" } }></div>\n                        <div className=\"emp_dropdown\">\n                            <p className=\"pl-4 pb-2 mb-1 font-weight-bold border-bottom\"> { encryptor.decrypt(Data.login_id) } </p>\n                            <NavLink to=\"/empprofile\" className=\"d-center links\">\n                                <div className=\"pr-3\"><i className=\"las la-user\"></i></div>\n                                <div className=\"links_txt\">Profile</div>\n                            </NavLink>\n                            <NavLink to=\"/\" className=\"d-center links\">\n                                <div className=\"pr-3\"><i className=\"las la-tasks\"></i></div>\n                                <div className=\"links_txt\">Settings</div>\n                            </NavLink>\n                            <NavLink to=\"/logout\" className=\"d-center links\">\n                                <div className=\"pr-3\"><i className=\"las la-sign-out-alt\"></i></div>\n                                <div className=\"links_txt\">Logout</div>\n                            </NavLink>\n                        </div>\n                    </div>\n                    <div className=\"threeDots d-1200-block\" onClick={ TrueOrFalse }>\n                        <button className=\"btn p-0 m-0\">\n                            <i className=\"las la-ellipsis-v la-2x\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n\n}\n\nexport default TopBar;"],"sourceRoot":""}