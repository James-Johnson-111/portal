(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[16],{130:function(e,t){},131:function(e,t){},133:function(e,t){},134:function(e,t){},136:function(e,t){},137:function(e,t){},138:function(e,t){},139:function(e,t){},140:function(e,t){},141:function(e,t){},142:function(e,t){},143:function(e,t){},144:function(e,t){},145:function(e,t){},158:function(e,t,n){"use strict";t.a=n.p+"static/media/icons8-iphone-spinner.e2bb0653.gif"},619:function(e,t,n){},620:function(e,t,n){},774:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(1),s=(n(619),n(10)),i=n(24),o=n(75),r=n.n(o),l=n(77),d=(n(78),n(620),n(0)),h=function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),s=n[0],i=n[1];return Object(a.useEffect)((function(){i(e.data)}),[e.data]),Object(d.jsx)("div",{className:"DicussionDrive",children:s.map((function(t,n){return Object(d.jsx)("div",{className:"DriveItem",style:{backgroundImage:"url('images/drive/"+t.name+"')"},onClick:function(){return e.AttachDrive(t.name)}},n)}))})},u=n(80),j=n(98),m=n(359),b=(n(239),n.p+"static/media/nochat.25180477.png"),p=n(158),O=Object(a.lazy)((function(){return n.e(62).then(n.bind(null,801))})),g=Object(a.lazy)((function(){return n.e(61).then(n.bind(null,802))}));t.default=function(){var e=Object(a.useState)(new Date),t=Object(c.a)(e,2),o=t[0],f=t[1],v=n(107)("real secret keys should be long and random"),x=Object(a.useState)([]),w=Object(c.a)(x,2),C=w[0],N=w[1],D=Object(a.useState)(!1),S=Object(c.a)(D,2),y=S[0],E=S[1],_=Object(a.useState)(""),k=Object(c.a)(_,2),I=k[0],T=k[1],H=Object(a.useState)([]),P=Object(c.a)(H,2),R=P[0],B=P[1],L=Object(a.useState)({}),A=Object(c.a)(L,2),M=A[0],F=A[1],q=Object(a.useState)(!1),U=Object(c.a)(q,2),W=U[0],z=U[1],J=Object(a.useState)(!1),Y=Object(c.a)(J,2),G=Y[0],$=Y[1],K=Object(a.useState)([]),Q=Object(c.a)(K,2),V=Q[0],X=Q[1],Z=Object(a.useState)(),ee=Object(c.a)(Z,2),te=ee[0],ne=ee[1],ce=Object(a.useState)(),ae=Object(c.a)(ce,2),se=ae[0],ie=ae[1],oe=Object(i.c)((function(e){return e.EmpAuth.EmployeeData}));Object(a.useEffect)((function(){re("chat"),ne(parseInt(sessionStorage.getItem("EmpID")))}),[]),Object(a.useMemo)((function(){window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())}),[o]),Object(a.useEffect)((function(){j.a.on("UserOnline",(function(e){T(e.rslt[0].app_status)})),j.a.on("UserNewChat",(function(e){oe.emp_id===parseInt(e.receiver)&&void 0!==M.emp_id&&M.emp_id===parseInt(e.sender)&&r()(".NewTweet .refresh").trigger("click")}))}),[M,oe.emp_id]);var re=function(e){var t=new FormData;"chat"===e&&(N([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),s.a.post("/getchatemployees",t).then((function(e){N(e.data)})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide())),"contacts"===e&&(N([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),s.a.post("/getallemployees",t).then((function(e){N(e.data)})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide()))},le=function(e,t){E(!0);var n=new FormData;n.append("sender",e),n.append("receiver",sessionStorage.getItem("EmpID")),n.append("chatDate",o.toString()),s.a.post("/getemployeewithchat",n).then((function(e){E(!1),z(!0),F(C[t]),j.a.emit("UserOnline",C[t].emp_id),ie(t),e.data.length!==R.length&&(B([]),B(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300))})).catch((function(e){E(!1),l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())},de=function(){if(""!==r()("#Sendtext").val()){var e=new FormData;e.append("eventID",1),e.append("senderID",sessionStorage.getItem("EmpID")),e.append("receiverID",M.emp_id),e.append("ChatBody",v.encrypt(r()("#Sendtext").val())),e.append("NotificationBody",r()("#Sendtext").val()),e.append("Title",oe.name),s.a.post("/insertchat",e).then((function(){le(M.emp_id,se),r()("#Sendtext").val(""),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300),s.a.post("/newnotification",e).then((function(){j.a.emit("NewNotification",M.emp_id),j.a.emit("NewChat",{sender:oe.emp_id,receiver:M.emp_id,index:se})})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}};function he(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}var ue=function(){s.a.post("/getalldrive",{emp_id:oe.emp_id}).then((function(e){X(e.data)})).catch((function(e){console.log(e)})),je()},je=function(){$(!G)},me=function(){window.screen.width<750&&(r()(".Center").hide(),r()(".List").hide(),r()(".chatcount").hide(),r()(".Right").show())};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"EmployeeChat",children:[Object(d.jsx)(u.a,{show:G,Hide:je,content:Object(d.jsx)(h,{AttachDrive:function(e){var t="/***"+e+"***/";r()("#Sendtext").val(t),de(),je()},data:V})}),Object(d.jsxs)("div",{className:"Left",children:[Object(d.jsxs)("div",{className:"chatcount",children:[Object(d.jsx)("p",{className:"font-weight-bold",children:"Chat Members"}),Object(d.jsxs)("p",{children:[C.length>0?C.length-1:C.length,"members"]})]}),Object(d.jsxs)("div",{className:"tabs",children:[Object(d.jsx)("button",{onClick:function(){return re("chat")},children:"Chat"}),Object(d.jsx)("button",{onClick:function(){return re("contacts")},children:"contacts"})]}),Object(a.useMemo)((function(){return Object(d.jsx)(a.Suspense,{fallback:Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsx)("img",{src:p.a,alt:"Please wait.....",width:"50",height:"50",className:"rounded-circle"}),Object(d.jsx)("p",{className:"mb-0",children:"Please Wait...."})]}),children:Object(d.jsx)(O,{Employees:C,GetThatEmpChat:le})})}),[C])]}),Object(a.useMemo)((function(){return Object(d.jsxs)("div",{className:"Center",children:[W?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"ChatEmployee",children:[Object(d.jsx)("img",{src:"images/employees/"+M.emp_image,width:"50",height:"50",alt:"chat employee img",className:"rounded-circle"}),Object(d.jsxs)("div",{className:"ml-2",children:[Object(d.jsxs)("p",{className:"font-weight-bold",children:[" ",M.name," "]}),Object(d.jsxs)("p",{children:[" ",M.designation_name+" in "+M.company_name," "]})]})]}),Object(d.jsxs)("div",{className:"ChatContent",id:"ChatContainer",children:[o.toDateString()!==(new Date).toDateString()?Object(d.jsxs)("p",{className:"TweetDate",children:[" ",o.toDateString()]}):null,Object(d.jsx)(a.Suspense,{fallback:Object(d.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{src:p.a,alt:"Please wait.....",width:"50",height:"50",className:"rounded-circle"})}),children:Object(d.jsx)(g,{LoadingState:y,encryptor:v,Calender:o,EmpID:te,CurrentEmployeeData:oe,tConvert:he,Chat:R,ChatEmployee:M})})]}),Object(d.jsxs)("div",{className:"NewTweet",children:[Object(d.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(d.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(d.jsx)("i",{className:"las la-paperclip",onClick:ue})]}),Object(d.jsx)("button",{onClick:de,children:Object(d.jsx)("i",{className:"las la-arrow-up"})}),Object(d.jsx)("button",{className:"btn text-white refresh d-none",onClick:function(){return le(M.emp_id,se)},children:Object(d.jsx)("i",{className:"las la-redo-alt"})})]})]}):Object(d.jsxs)("div",{className:"NoChat",children:[Object(d.jsx)("img",{src:b,width:"100%",height:"auto",alt:"No CHat Img"}),Object(d.jsx)("h3",{className:"font-weight-bold",children:"NO EMPLOYEE SELECTED"})]}),Object(d.jsx)("div",{className:"calenderdiv",onClick:me,children:Object(d.jsx)("i",{className:"las la-calendar"})})]})}),[o,R,M,te,se,W,y]),Object(d.jsx)("div",{className:"Right",children:Object(d.jsxs)("div",{className:"RightDiv",children:[Object(d.jsx)(m.a,{onChange:f,value:o}),Object(d.jsxs)("div",{className:"Details",children:[Object(d.jsx)("p",{className:"lightColor",children:"Status"}),Object(d.jsx)("p",{style:{fontWeight:500},children:W?M.name+" is "+(""===I?"offline":"online"):"No Employee Selected"})]}),Object(d.jsxs)("div",{className:"Details",children:[Object(d.jsx)("p",{className:"lightColor",children:"You are online from"}),Object(d.jsx)("p",{style:{fontWeight:500},children:(new Date).toTimeString()})]})]})})]})})}},80:function(e,t,n){"use strict";n(1),n(85);var c=n(0);t.a=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(c.jsx)("div",{className:"dark",onClick:e.Hide}),Object(c.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},85:function(e,t,n){}}]);
//# sourceMappingURL=16.88a31d42.chunk.js.map