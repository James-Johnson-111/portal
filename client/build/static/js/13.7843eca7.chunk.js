(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[13],{115:function(e,t){},116:function(e,t){},118:function(e,t){},119:function(e,t){},121:function(e,t){},122:function(e,t){},123:function(e,t){},124:function(e,t){},125:function(e,t){},126:function(e,t){},127:function(e,t){},128:function(e,t){},129:function(e,t){},130:function(e,t){},619:function(e,t,n){},620:function(e,t,n){},757:function(e,t,n){"use strict";n.r(t);var s=n(8),a=n(1),c=(n(619),n(10)),i=n(25),l=n(23),r=n.n(l),d=n(77),o=(n(76),n(83),n(620),n(0)),j=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){i(e.data)}),[e.data]),Object(o.jsx)("div",{className:"DicussionDrive",children:c.map((function(t,n){return Object(o.jsx)("div",{className:"DriveItem",style:{backgroundImage:"url('images/drive/"+t.name+"')"},onClick:function(){return e.AttachDrive(t.name)}},n)}))})},m=n(79),h=(n(232),n(89)),b=n(750),p=(n(621),n.p+"static/media/nochat.25180477.png");t.default=function(){var e=Object(a.useState)(new Date),t=Object(s.a)(e,2),l=t[0],u=t[1],O=n(98)("real secret keys should be long and random"),g=Object(a.useState)([]),x=Object(s.a)(g,2),f=x[0],v=x[1],N=Object(a.useState)(""),w=Object(s.a)(N,2),_=w[0],D=w[1],S=Object(a.useState)([]),C=Object(s.a)(S,2),y=C[0],k=C[1],T=Object(a.useState)({}),E=Object(s.a)(T,2),I=E[0],F=E[1],B=Object(a.useState)(!1),R=Object(s.a)(B,2),M=R[0],H=R[1],L=Object(a.useState)(!1),A=Object(s.a)(L,2),P=A[0],z=A[1],G=Object(a.useState)([]),q=Object(s.a)(G,2),U=q[0],Y=q[1],J=Object(a.useState)(),W=Object(s.a)(J,2),$=W[0],K=W[1],Q=Object(a.useState)(),V=Object(s.a)(Q,2),X=V[0],Z=V[1],ee=Object(i.c)((function(e){return e.EmpAuth.EmployeeData}));Object(a.useEffect)((function(){te("chat"),K(parseInt(sessionStorage.getItem("EmpID"))),r()(".RightCalender").hide(0)}),[]),Object(a.useEffect)((function(){r()(".RightCalender").hide(),r()(".SecondDiv .Left").show(),r()(".SecondDiv .Right").show()}),[l]),Object(a.useEffect)((function(){h.a.on("UserOnline",(function(e){D(e.rslt[0].app_status)})),h.a.on("UserNewChat",(function(e){ee.emp_id===parseInt(e.receiver)&&void 0!==I.emp_id&&I.emp_id===parseInt(e.sender)&&r()(".NewTweet .refresh").trigger("click")}))}),[I]);var te=function(e){var t=new FormData;"chat"===e&&(v([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getchatemployees",t).then((function(e){v(e.data)})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))),"contacts"===e&&(v([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getallemployees",t).then((function(e){v(e.data)})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})))},ne=function(e,t){var n=new FormData;n.append("sender",e),n.append("receiver",sessionStorage.getItem("EmpID")),n.append("chatDate",l.toString()),c.a.post("/getemployeewithchat",n).then((function(e){H(!0),F(f[t]),h.a.emit("UserOnline",f[t].emp_id),Z(t),e.data.length!==y.length&&(k([]),k(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e.scrollTop=e.scrollHeight}),300))})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},se=function(){if(""!==r()("#Sendtext").val()){var e=new FormData;e.append("eventID",1),e.append("senderID",sessionStorage.getItem("EmpID")),e.append("receiverID",I.emp_id),e.append("ChatBody",O.encrypt(r()("#Sendtext").val())),e.append("NotificationBody",r()("#Sendtext").val()),e.append("Title",ee.name),c.a.post("/insertchat",e).then((function(){ne(I.emp_id,X),r()("#Sendtext").val(""),setTimeout((function(){var e=document.getElementById("ChatContainer");e.scrollTop=e.scrollHeight}),300),c.a.post("/newnotification",e).then((function(){h.a.emit("NewNotification",I.emp_id),h.a.emit("NewChat",{sender:ee.emp_id,receiver:I.emp_id,index:X})})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}};function ae(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}var ce=function(){c.a.post("/getalldrive",{emp_id:ee.emp_id}).then((function(e){Y(e.data)})).catch((function(e){console.log(e)})),ie()},ie=function(){z(!P)},le=function(e){var t="/***"+e+"***/";r()("#Sendtext").val(t),se(),ie()};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"EmployeeChat",children:[Object(o.jsx)(m.a,{show:P,Hide:ie,content:Object(o.jsx)(j,{AttachDrive:le,data:U})}),Object(o.jsxs)("div",{className:"Left",children:[Object(o.jsx)("p",{className:"font-weight-bold",children:"Chat Members"}),Object(o.jsxs)("p",{children:[f.length-1," members"]}),Object(o.jsxs)("div",{className:"tabs",children:[Object(o.jsx)("button",{onClick:function(){return te("chat")},children:"Chat"}),Object(o.jsx)("button",{onClick:function(){return te("contacts")},children:"contacts"})]}),Object(o.jsx)("div",{className:"List",children:0===f.length?Object(o.jsx)("h5",{children:" No Chat Found "}):f.map((function(e,t){return Object(o.jsx)(o.Fragment,{children:e.emp_id===parseInt(sessionStorage.getItem("EmpID"))?null:Object(o.jsxs)("div",{className:"employee",onClick:function(){return ne(e.emp_id,t)},children:[Object(o.jsx)("div",{children:Object(o.jsx)("img",{src:"images/employees/"+e.emp_image,alt:"empImg",width:"45",height:"45",className:"rounded-circle"})}),Object(o.jsxs)("div",{className:"ml-2",children:[Object(o.jsxs)("p",{className:"font-weight-bold",children:[" ",e.name," "]}),Object(o.jsxs)("p",{children:[" ",e.designation_name+" in "+e.company_name," "]})]})]},t)})}))})]}),Object(o.jsx)("div",{className:"Center",children:M?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"ChatEmployee",children:[Object(o.jsx)("img",{src:"images/employees/"+I.emp_image,width:"50",height:"50",alt:"chat employee img",className:"rounded-circle"}),Object(o.jsxs)("div",{className:"ml-2",children:[Object(o.jsxs)("p",{className:"font-weight-bold",children:[" ",I.name," "]}),Object(o.jsxs)("p",{children:[" ",I.designation_name+" in "+I.company_name," "]})]})]}),Object(o.jsxs)("div",{className:"ChatContent",id:"ChatContainer",children:[l.toDateString()!==(new Date).toDateString()?Object(o.jsxs)("p",{className:"TweetDate",children:[" ",l.toDateString()]}):null,y.map((function(e,t){var n="";O.decrypt(e.chat_body).includes("/***")&&(n=O.decrypt(e.chat_body).split("/***")[1].split("***")[0]);var s=new Date(e.send_date),a=null;if(l.toDateString()===(new Date).toDateString())if(t-1>=0){var c=new Date(y[t-1].send_date).toDateString(),i=new Date(y[t].send_date).toDateString();i!==c&&(a=Object(o.jsxs)("p",{className:"TweetDate",children:[" ",i]}))}else 0===t&&(a=Object(o.jsxs)("p",{className:"TweetDate",children:[" ",new Date(y[t].send_date).toDateString()]}));return Object(o.jsx)(o.Fragment,{children:l.toDateString()===(new Date).toDateString()?Object(o.jsxs)(o.Fragment,{children:[a,Object(o.jsxs)("div",{className:e.sender_id!==$?"Tweet":"Tweet owner",children:[Object(o.jsxs)("p",{className:"Tweeter",children:[" ",e.sender_id!==$?I.name:ee.name]}),Object(o.jsx)("div",{className:"TweetBox",children:O.decrypt(e.chat_body).includes("/***")?Object(o.jsx)("img",{src:"images/drive/"+n,width:"100%",height:"auto",alt:"drive attachment"}):Object(o.jsx)(o.Fragment,{children:O.decrypt(e.chat_body)})}),Object(o.jsxs)("p",{className:"TweetTime",children:[e.sender_id!==$?null:Object(o.jsx)(o.Fragment,{children:"Read"===e.read_status?Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check-double mr-1"}):Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check mr-1"})}),ae(e.send_time)]})]},t)]}):s.toDateString()===l.toDateString()?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:e.sender_id!==$?"Tweet":"Tweet owner",children:[Object(o.jsxs)("p",{className:"Tweeter",children:[" ",e.sender_id!==$?I.name:ee.name]}),Object(o.jsx)("div",{className:"TweetBox",children:O.decrypt(e.chat_body).includes("/***")?Object(o.jsx)("img",{src:"images/drive/"+n,width:"100%",height:"auto",alt:"drive attachment"}):Object(o.jsx)(o.Fragment,{children:O.decrypt(e.chat_body)})}),Object(o.jsxs)("p",{className:"TweetTime",children:["Read"===e.read_status?Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check-double mr-1"}):Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check mr-1"}),ae(e.send_time)]})]},t)}):null})}))]}),Object(o.jsxs)("div",{className:"NewTweet",children:[Object(o.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(o.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(o.jsx)("i",{className:"las la-paperclip",onClick:ce})]}),Object(o.jsx)("button",{onClick:se,children:Object(o.jsx)("i",{className:"las la-arrow-up"})}),Object(o.jsx)("button",{className:"btn text-white refresh d-none",onClick:function(){return ne(I.emp_id,X)},children:Object(o.jsx)("i",{className:"las la-redo-alt"})})]})]}):Object(o.jsxs)("div",{className:"NoChat",children:[Object(o.jsx)("img",{src:p,width:"100%",height:"auto",alt:"No CHat Img"}),Object(o.jsx)("h3",{className:"font-weight-bold",children:"NO EMPLOYEE SELECTED"})]})}),Object(o.jsx)("div",{className:"Right",children:Object(o.jsxs)("div",{className:"RightDiv",children:[Object(o.jsx)(b.a,{onChange:u,value:l}),Object(o.jsxs)("div",{className:"Details",children:[Object(o.jsx)("p",{className:"lightColor",children:"Status"}),Object(o.jsx)("p",{style:{fontWeight:500},children:M?I.name+" is "+(""===_?"offline":"online"):"No Employee Selected"})]}),Object(o.jsxs)("div",{className:"Details",children:[Object(o.jsx)("p",{className:"lightColor",children:"You are online from"}),Object(o.jsx)("p",{style:{fontWeight:500},children:(new Date).toTimeString()})]})]})}),Object(o.jsx)("div",{className:"calenderdiv"})]}),Object(o.jsxs)("div",{className:"EmployeeChat SecondDiv",children:[Object(o.jsx)(m.a,{show:P,Hide:ie,content:Object(o.jsx)(j,{AttachDrive:le,data:U})}),Object(o.jsxs)("div",{className:"Left",children:[Object(o.jsx)("p",{className:"font-weight-bold",children:"Chat Members"}),Object(o.jsxs)("p",{children:[f.length-1," members"]}),Object(o.jsxs)("div",{className:"tabs",children:[Object(o.jsx)("button",{onClick:function(){return te("chat")},children:"Chat"}),Object(o.jsx)("button",{onClick:function(){return te("contacts")},children:"contacts"})]}),Object(o.jsx)("div",{className:"List",children:0===f.length?Object(o.jsx)("h5",{children:" No Chat Found "}):f.map((function(e,t){return Object(o.jsx)(o.Fragment,{children:e.emp_id===parseInt(sessionStorage.getItem("EmpID"))?null:Object(o.jsxs)("div",{className:"employee",onClick:function(){return function(e,t){var n=new FormData;n.append("sender",e),n.append("receiver",sessionStorage.getItem("EmpID")),n.append("chatDate",l.toString()),c.a.post("/getemployeewithchat",n).then((function(e){H(!0),F(f[t]),h.a.emit("UserOnline",f[t].emp_id),Z(t),(e.data.length>y.length||e.data.length<y.length)&&(k([]),k(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e.scrollTop=e.scrollHeight}),300))})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),r()(".SecondDiv .Left").hide(),r()(".SecondDiv .Center").show()}(e.emp_id,t)},children:[Object(o.jsx)("div",{children:Object(o.jsx)("img",{src:"images/employees/"+e.emp_image,alt:"empImg",width:"45",height:"45",className:"rounded-circle"})}),Object(o.jsxs)("div",{className:"ml-2",children:[Object(o.jsxs)("p",{className:"font-weight-bold",children:[" ",e.name," "]}),Object(o.jsxs)("p",{children:[" ",e.designation_name+" in "+e.company_name," "]})]})]},t)})}))})]}),Object(o.jsx)("div",{className:"Center",children:M?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"ChatEmployee",children:[Object(o.jsx)("img",{src:"images/employees/"+I.emp_image,width:"50",height:"50",alt:"chat employee img",className:"rounded-circle",onClick:function(){r()(".SecondDiv .Left").show(),r()(".SecondDiv .Center").hide()}}),Object(o.jsxs)("div",{className:"ml-2",children:[Object(o.jsxs)("p",{className:"font-weight-bold",children:[" ",I.name," "]}),Object(o.jsxs)("p",{children:[" ",I.designation_name+" in "+I.company_name," "]})]})]}),Object(o.jsxs)("div",{className:"ChatContent",id:"ChatContainer",children:[l.toDateString()!==(new Date).toDateString()?Object(o.jsxs)("p",{className:"TweetDate",children:[" ",l.toDateString()]}):null,y.map((function(e,t){var n="";O.decrypt(e.chat_body).includes("/***")&&(n=O.decrypt(e.chat_body).split("/***")[1].split("***")[0]);var s=new Date(e.send_date),a=null;if(l.toDateString()===(new Date).toDateString())if(t-1>=0){var c=new Date(y[t-1].send_date).toDateString(),i=new Date(y[t].send_date).toDateString();i!==c&&(a=Object(o.jsxs)("p",{className:"TweetDate",children:[" ",i]}))}else 0===t&&(a=Object(o.jsxs)("p",{className:"TweetDate",children:[" ",new Date(y[t].send_date).toDateString()]}));return Object(o.jsx)(o.Fragment,{children:l.toDateString()===(new Date).toDateString()?Object(o.jsxs)(o.Fragment,{children:[a,Object(o.jsxs)("div",{className:e.sender_id!==$?"Tweet":"Tweet owner",children:[Object(o.jsxs)("p",{className:"Tweeter",children:[" ",e.sender_id!==$?I.name:ee.name]}),Object(o.jsx)("div",{className:"TweetBox",children:O.decrypt(e.chat_body).includes("/***")?Object(o.jsx)("img",{src:"images/drive/"+n,width:"100%",height:"auto",alt:"drive attachment"}):Object(o.jsx)(o.Fragment,{children:O.decrypt(e.chat_body)})}),Object(o.jsxs)("p",{className:"TweetTime",children:[e.sender_id!==$?null:Object(o.jsx)(o.Fragment,{children:"Read"===e.read_status?Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check-double mr-1"}):Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check mr-1"})}),ae(e.send_time)]})]},t)]}):s.toDateString()===l.toDateString()?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:e.sender_id!==$?"Tweet":"Tweet owner",children:[Object(o.jsxs)("p",{className:"Tweeter",children:[" ",e.sender_id!==$?I.name:ee.name]}),Object(o.jsx)("div",{className:"TweetBox",children:O.decrypt(e.chat_body).includes("/***")?Object(o.jsx)("img",{src:"images/drive/"+n,width:"100%",height:"auto",alt:"drive attachment"}):Object(o.jsx)(o.Fragment,{children:O.decrypt(e.chat_body)})}),Object(o.jsxs)("p",{className:"TweetTime",children:["Read"===e.read_status?Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check-double mr-1"}):Object(o.jsx)("i",{style:{fontSize:"12px !important"},className:"las la-check mr-1"}),ae(e.send_time)]})]},t)}):null})}))]}),Object(o.jsxs)("div",{className:"NewTweet",children:[Object(o.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(o.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(o.jsx)("i",{className:"las la-paperclip",onClick:ce})]}),Object(o.jsx)("button",{onClick:se,children:Object(o.jsx)("i",{className:"las la-arrow-up"})}),Object(o.jsx)("button",{className:"btn text-white refresh d-none",onClick:function(){return ne(I.emp_id,X)},children:Object(o.jsx)("i",{className:"las la-redo-alt"})})]})]}):Object(o.jsxs)("div",{className:"NoChat",children:[Object(o.jsx)("img",{src:p,width:"100%",height:"auto",alt:"No CHat Img"}),Object(o.jsx)("h3",{className:"font-weight-bold",children:"NO EMPLOYEE SELECTED"})]})}),Object(o.jsx)("div",{className:"RightCalender",children:Object(o.jsx)(b.a,{onChange:u,value:l})}),Object(o.jsx)("div",{className:"calenderdiv",onClick:function(){r()(".RightCalender").show(),r()(".SecondDiv .Left").hide(),r()(".SecondDiv .Right").hide()},children:Object(o.jsx)("i",{className:"las la-calendar"})})]})]})}},79:function(e,t,n){"use strict";n(1),n(80);var s=n(0);t.a=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(s.jsx)("div",{className:"dark",onClick:e.Hide}),Object(s.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},80:function(e,t,n){},83:function(e,t,n){"use strict";var s=n(1),a=(n(84),n(23)),c=n.n(a),i=n(17),l=n(0);t.a=function(e){Object(s.useEffect)((function(){c()(".Speeddail_Grid").slideToggle(0)}),[]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"Menu",children:e.data.length>0?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"Menu_Grid",children:e.data.map((function(e,t){return Object(l.jsx)(l.Fragment,{children:e.txt?e.link?Object(l.jsx)(i.b,{to:e.href,children:Object(l.jsx)("button",{children:Object(l.jsx)("p",{className:"font-weight-bolder mb-0",children:e.txt})})}):Object(l.jsx)("button",{onClick:function(){return e.func()},children:Object(l.jsx)("p",{className:"font-weight-bolder mb-0",children:e.txt})}):null})}))}),Object(l.jsxs)("div",{className:"Menu_Speeddail",children:[Object(l.jsx)("div",{className:" ",onClick:function(){c()(".Menu_Speeddail .Speeddail_Grid").slideToggle(200),c()(".Menu_Speeddail .Button .las").hasClass("la-bars")?(c()(".Menu_Speeddail .Button .las").removeClass("la-bars"),c()(".Menu_Speeddail .Button .las").addClass("la-times")):(c()(".Menu_Speeddail .Button .las").removeClass("la-times"),c()(".Menu_Speeddail .Button .las").addClass("la-bars"))},children:Object(l.jsx)("i",{class:"las la-times"})}),Object(l.jsx)("div",{className:"Speeddail_Grid",children:e.data.map((function(e,t){return Object(l.jsx)(l.Fragment,{children:e.txt?e.link?Object(l.jsx)(i.b,{to:e.href,children:Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"mb-1 Speeddail_Grid1 divs"+t,children:Object(l.jsx)("i",{className:e.icon})}),Object(l.jsx)("p",{children:e.txt})]},t)}):Object(l.jsxs)("div",{className:"clicks",onClick:function(){return e.func()},children:[Object(l.jsx)("div",{className:"mb-1 Speeddail_Grid1 divs"+t,children:Object(l.jsx)("i",{className:e.icon})}),Object(l.jsx)("p",{children:e.txt})]},t):null})}))})]})]}):null})})}},84:function(e,t,n){}}]);
//# sourceMappingURL=13.7843eca7.chunk.js.map